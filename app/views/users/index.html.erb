<h2>Manage Users</h2>
<%= link_to "New User", new_user_path %>
<hr>
<div class="users-list"> <!-- Flex container -->
  <% @users.each do |user| %>
    <div class="user-card">
      <div class="user-info">
        <p class="user-name"><strong>Name:</strong> <%= user.name %></p>
        <p class="user-email"><strong>Email:</strong> <%= user.email %></p>
        <p class="user-role"><strong>Role:</strong> <%= if user.admin == 1
                "Admin" 
              elsif user.admin == 2
                "Publisher"
              else
                "Subscriber"
              end %></p>
      </div>
      <div class="user-actions">
        <% if user == current_user %>
          <%= link_to "Change Password",
            edit_user_registration_path,
            class: 'button' %> 
        <% else %>
          <%= link_to "Change Role", 
            toggle_user_admin_path(user),
            method: :post,
            class: 'button' %>
          <%= link_to 'Reset Password', reset_user_password_path(user),
            method: :post, class: 'button' %>
          <%= link_to 'Delete', user_path(user),
            method: :delete, class: 'button button-danger',
            data: { confirm: "Are you sure you want to delete #{user.name} with email: #{user.email}?  This will also delete any posts or comments they have made." } %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
